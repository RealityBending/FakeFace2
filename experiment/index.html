<!DOCTYPE html>
<html>
    <head>
        <!-- Title shown in tab -->
        <title>Experiment</title>

        <!-- Load plugins used in Demographics -->
        <script src="https://unpkg.com/jspsych"></script>
        <script src="https://unpkg.com/@jspsych/plugin-browser-check"></script>
        <script src="https://unpkg.com/@jspsych/plugin-html-button-response"></script>
        <script src="https://unpkg.com/@jspsych/plugin-preload"></script>
        <script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response"></script>
        <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response"></script>
        <script src="https://unpkg.com/@jspsych/plugin-survey-multi-choice"></script>
        <script src="https://unpkg.com/@jspsych/plugin-survey-text"></script>
        <script src="https://realitybending.github.io/JSmisc/jspsych_extensions/plugin-multiple-slider.js"></script>
        <script src="https://unpkg.com/@jspsych/plugin-survey-likert"></script>

        <!-- Custom scripts -->
        <script src="stimuli/stimuli.js"></script>
        <script src="demographics.js"></script>
        <script src="fiction.js"></script>
        <script src="questionnaires.js"></script>

        <!-- CSS -->
        <link
            href="https://unpkg.com/jspsych/css/jspsych.css"
            rel="stylesheet"
            type="text/css"
        />
        <style>
            .narrow-text {
                max-width: 50%;
            }
        </style>
    </head>

    <body></body>

    <script>
        // Initialize experiment =================================================
        var jsPsych = initJsPsych({
            on_finish: function () {
                jsPsych.data.displayData("json") // Display data in browser
            },
        })

        // Initialize timeline
        var timeline = []

        // Demographics ===========================================================
        timeline.push(demographics_browser_info)
        timeline.push(demographics_consent)
        timeline.push(demographics_info)
        timeline.push(sexual_orientation)

        // Questionnaires ===========================================================
           // Instructions Questionnaires
        var instructions0 = {
            type: jsPsychHtmlButtonResponse,
            stimulus:
                "<h1>Part 2/4</h1>" +
                "<p>Great! We will continue with a series of questionnaires about your personality.<br>Again, it is important that you answer truthfully. Please read the statements carefully and answer according to what describe you the best.</p>",
            choices: ["Continue"],
            data: { screen: "instructions0" },
        }
        timeline.push(instructions2)
        
         /* Mini IPIP *==========================*/
            var IPIP_items = []
            for (const [index, element] of IPIP.entries()) {
                IPIP_items.push({
                    prompt: element,
                    name: IPIP_dim[index],
                    ticks: scale2,
                    required: true,
                    min: 0,
                    max: 1,
                    step: 0.01,
                    slider_start: 0.5
                })
            }
        
            var IPIP6 = {
                type: jsPsychMultipleSlider,
                questions: IPIP_items,
                randomize_question_order: false,
                preamble:
                    "<p><b>Survey 1/7</b></b></p>" +
                    "<p>Please answer the following questions based on how accurately each statement describes you.</p>",
                require_movement: true,
                on_start: function () {
                    ; (document.body.style.cursor = "auto"),
                        (document.querySelector(
                            "#jspsych-progressbar-container"
                        ).style.display = "inline")
                },
                data: {
                    screen: "IPIP6",
                },
            }

            timeline.push(IPIP6)
        
            /* Attitudes towards AI *==========================*/
            var GAAIS_items = []
            for (const [index, element] of GAAIS.entries()) {
                GAAIS_items.push({
                    prompt: element,
                    name: GAAIS_dim[index],
                    ticks: scale2,
                    required: true,
                    min: 0,
                    max: 1,
                    step: 0.01,
                    slider_start: 0.5
                })
            }
        
            var AI_attitudes = {
                type: jsPsychMultipleSlider,
                questions: GAAIS_items,
                randomize_question_order: false,
                preamble:
                    "<p><b>Survey 4/7</b></p>" +
                    "<p>We are interested in your attitudes towards Artificial Intelligence (AI).</p>" +
                    "<p>Please read the statements below carefully and indicate the extent to which you agree with each statement.</p>",
                require_movement: true,
                on_start: function () {
                    ; (document.body.style.cursor = "auto"),
                        (document.querySelector(
                            "#jspsych-progressbar-container"
                        ).style.display = "inline")
                },
                data: {
                    screen: "GAAIS",    
                },
            }

         timeline.push(AI_attitudes)
        
        // Fiction task ===========================================================
        timeline.push(fiction_preloadstims)
        timeline.push(fiction_phase1)

        // Run the timeline -------------------------------------------------------
        jsPsych.run(timeline)
    </script>
</html>
